{% extends 'base/base.html' %}

{% block title %}Dashboard - NGO Education System{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>üìö Dashboard Overview</h1>
    <p>Welcome to the Literacy Foundation India Management System</p>
</div>

<div class="dashboard-grid">
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-users"></i>
            </div>
        </div>
        <div class="card-content">
            <h3>Total Students</h3>
            <div class="card-value">{{ total_students }}</div>
            <div class="card-change positive">
                <i class="fas fa-arrow-up"></i>
                +12% from last month
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-building"></i>
            </div>
        </div>
        <div class="card-content">
            <h3>Active Centers</h3>
            <div class="card-value">{{ total_centers }}</div>
            <div class="card-change positive">
                <i class="fas fa-arrow-up"></i>
                +2 new centers
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-chart-line"></i>
            </div>
        </div>
        <div class="card-content">
            <h3>Attendance Rate</h3>
            <div class="card-value">{{ attendance_rate }}%</div>
            <div class="progress-bar" style="margin-top: 1rem;">
                <div class="progress-fill" style="width: {{ attendance_rate }}%;"></div>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
        </div>
        <div class="card-content">
            <h3>At Risk Students</h3>
            <div class="card-value">12</div>
            <div class="card-change negative">
                <i class="fas fa-arrow-down"></i>
                Needs attention
            </div>
        </div>
    </div>
</div>

<div class="dashboard-section">
    <h2>üè¢ Centers Overview</h2>
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Center Name</th>
                    <th>Location</th>
                    <th>Students</th>
                    <th>Capacity</th>
                    <th>Utilization</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for center in centers_with_counts %}
                <tr>
                    <td>
                        <strong>{{ center.name }}</strong>
                    </td>
                    <td>üìç {{ center.location }}</td>
                    <td>
                        <span style="font-weight: 600; color: #667eea;">{{ center.student_count }}</span>
                    </td>
                    <td>{{ center.capacity }}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div class="progress-bar" style="width: 80px;">
                                <div class="progress-fill" style="width: {% widthratio center.student_count center.capacity 100 %}%;"></div>
                            </div>
                            <span style="font-size: 0.85rem; font-weight: 600;">
                                {% widthratio center.student_count center.capacity 100 %}%
                            </span>
                        </div>
                    </td>
                    <td>
                        <span class="status-indicator status-active">
                            <i class="fas fa-circle" style="font-size: 0.5rem;"></i>
                            Active
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'center_detail' center.id %}" class="btn btn-primary btn-sm">
                            <i class="fas fa-eye"></i> View Details
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align: center; padding: 3rem; color: #718096;">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                        No centers found. <a href="#" style="color: #667eea;">Add your first center</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

